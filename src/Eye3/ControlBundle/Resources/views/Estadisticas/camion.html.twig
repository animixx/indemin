{% extends "::base.html.twig" %}

{% block title %}Control Estadisticas{% endblock %}

{% block stylesheets %}
{{ parent() }}
		<link rel="stylesheet" href="{{ asset('bundles/eye3control/css/datepicker.css') }}" />

{% endblock %}

{% block body %}
	<div class="row" >
		<div class="col-md-4 col-xs-2"></div>
		<div class="col-md-3 col-xs-8">
			<!-- #section:plugins/date-time.datepicker -->
			<div class="input-group">
				<input class="form-control date-picker" id="id-date-picker-1" type="text" data-date-format="dd-mm-yyyy" placeholder="10-07-2014" />
				<span class="input-group-addon">
					<i class="fa fa-calendar bigger-110"></i>
				</span>
			</div>
		</div>
	</div>
{#dump(camiones)#}
	<div class="row">
		<div class="col-12">
			<div class="page-header"><h1>Camiones</h1></div>
		</div>
		<div class="col-12 ">
				<table class="table table-striped table-bordered table-hover">
				
				{% set titulos = [null, "Cant Ciclos", "Ciclo &Delta;t Max.", "Ciclo &Delta;t Min." , "Duracion Promedio", "Total periodo:"] %} 
				{% set contenido = [ null,'inicio', 'max', 'tiempo' , 'prom', 'suma'] %} 
				{% for row in 0..4 %}
					{% if loop.first %}
					<thead>
						<tr>
							<td >
							&nbsp;
							</td>
							{% for camion in camiones %}
							<td class="center">
							{{camion.camion}}
							</td>
							{% endfor %}
						</tr>
					</thead>
					<tbody>
					{% endif %}
						<tr>
							<td class="center">
							{{ cycle(titulos, loop.index )|raw }}
							</td>
							{% set pivote = 0 %}
							{% for camion in camiones %}
								<td class="center">
								{% if camion.camion == datos[pivote]['camion'] %}
									{{ datos[pivote][ (cycle(contenido, loop.parent.loop.index ))] }} 
									{% if datos|length > (pivote + datos[pivote]['inicio'] + 1)%}
										{% set pivote = pivote + datos[pivote]['inicio'] + 1 %}
									{% endif %}
								{% endif %}
								</td>
							{% endfor %}
						</tr>
					{% if loop.last %}
					</tbody>
					{% endif %}
				{% endfor %}
				</table>
		</div>	<!-- /.col -->	
		

		<div class=" col-12 ">
			<div class="widget-box">
				

				<div class="widget-body">
					<div class="widget-main">
						<!-- #section:plugins/charts.flotchart -->
						<div id="placeholder" ></div>

						
						
					</div><!-- /.widget-main -->
				</div><!-- /.widget-body -->
			</div><!-- /.widget-box -->
		</div><!-- /.col -->
			
			
			
	</div><!-- /.row -->
			
			
	
<!-- basic scripts -->

		<!--[if !IE]> -->
		<script type="text/javascript">
			window.jQuery || document.write("<script src='{{ asset('bundles/eye3control/js/jquery.min.js') }}'>"+"<"+"/script>");
		</script>

		<!-- <![endif]-->
		
<!-- page specific plugin scripts -->

		<script src="{{ asset('bundles/eye3control/js/flot/jquery.flot.min.js') }}"></script>
		<script src="{{ asset('bundles/eye3control/js/flot/jquery.flot.resize.min.js') }}"></script>
		<script src="{{ asset('bundles/eye3control/js/date-time/bootstrap-datepicker.min.js') }}"></script>
		
{# no compatibles con la el menu deslizable, asi que se desactivan , estaban para habilitar la seleccion del calendario con el icono 	
	<!-- ace scripts -->
		<script src="{{ asset('bundles/eye3control/js/ace-elements.min.js') }}"></script>
		<script src="{{ asset('bundles/eye3control/js/ace.min.js') }}"></script>
#}
		<!-- inline scripts related to this page -->
		<script type="text/javascript">

			jQuery(function($) {
			
	 //flot chart resize plugin, somehow manipulates default browser resize event to optimize it!
	  //but sometimes it brings up errors with normal resize event handlers
	  $.resize.throttleWindow = false;
	
	  var placeholder = $('#placeholder').css({'width':'90%' , 'min-height':'300px'});
				
		var data = [[-373597200000, 315.71], [-370918800000, 317.45], [-368326800000, 317.50],  [-99968400000, 319.79]]; 

$.plot(placeholder, data, {
        yaxis: {
        },
        xaxis: { mode: "time",minTickSize: [1, "hour"],
                min: (new Date("2000/01/01")).getTime(),
                max: (new Date("2000/01/02")).getTime()
},
        "lines": {"show": "true"},
        "points": {"show": "true"},
        clickable:true,hoverable: true
});

			})
			
			jQuery(function($) {
				
			
				
				//datepicker plugin
				//link
				$('.date-picker').datepicker({
					autoclose: true,
					todayHighlight: true
				})
				//show datepicker when clicking on the icon
				.next().on(ace.click_event, function(){
					$(this).prev().focus();
				});
			
			
			
			
			});
				
		</script>
	
{% endblock %}
